<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        padding-top: 160px;
      }
      .sticky-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1050;
        background: white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .expo-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        background: #fceae3;
        padding: 0.5rem 1rem;
      }
      .logo-section img {
        width: 80px;
        height: 80px;
      }
      .info-row {
        display: flex;
        gap: 1.5rem;
        text-align: center;
        font-weight: 500;
      }
      .main-navbar {
        background: #e17575;
        font-weight: bold;
        font-family: "Times New Roman", Times, serif;
      }
      .navbar-nav .nav-link {
        color: black;
      }
      .navbar-nav .nav-link:hover {
        color: #ffb300;
      }
      #cart-count {
        font-size: 0.7rem;
      }
      @media (max-width: 768px) {
        .expo-header,
        .logo-section,
        .info-row {
          flex-direction: column;
          text-align: center;
          gap: 0.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="sticky-wrapper">
      <header class="expo-header">
        <div class="logo-section">
          <img
            src="/image/banner/BgSub_restaurant-logo-design-(1)-template-b9bd726f6bee3380567f1c9b63a8c99b_screen.png"
            alt="Logo"
          />
        </div>
        <div class="info-row">
          <div class="fw-bold">MONDAY - SUNDAY</div>
          <div class="text-muted">7:00PM - 11:00AM</div>
          <div class="text-muted">üìç Diamond Khmer Restaurant, Koh Pich</div>
        </div>
      </header>

      <nav class="main-navbar navbar navbar-expand-lg navbar-dark">
        <div class="container">
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div
            class="collapse navbar-collapse justify-content-between"
            id="navbarNav"
          >
            <ul class="navbar-nav gap-2">
              <li class="nav-item">
                <a class="nav-link" href="../../index.html">Home Page</a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="../../main-page-English/fish_type.html"
                  >Fish Type</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="../../main-page-English/soup_type.html"
                  >Soup Type</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="../../main-page-English/grill_type.html"
                  >Grill Type</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="../../main-page-English/fried_type.html"
                  >Fried Type</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="../../main-page-English/dessert_type.html"
                  >Dessert Type</a
                >
              </li>
            </ul>
            <ul class="navbar-nav">
              <li class="nav-item position-relative">
                <a href="#" class="nav-link">
                  <i class="fa-solid fa-cart-shopping"></i>
                  <span class="ms-1">Cart</span>
                  <span
                    id="cart-count"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    >0</span
                  >
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>

    <div class="container my-5">
      <h2>Your Shopping Cart</h2>
      <table class="table table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Image</th>
            <th>Product</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Total</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody id="cartBody"></tbody>
      </table>
      <div class="text-end">
        <h4 id="cartTotal">Total: $0.00</h4>
        <button class="btn btn-success text-center" onclick="openPayment()">
          Proceed to Checkout
        </button>
      </div>
      <div class="modal fade" id="paymentModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <form onsubmit="processPayment(event)">
              <div class="modal-header">
                <h5 class="modal-title">Payment Information</h5>

                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <div class="mb-4 text-center">
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg"
                  alt="Visa"
                  width="60"
                  class="me-2"
                />
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/0/04/Mastercard-logo.png"
                  alt="MasterCard"
                  width="50"
                />
              </div>
              <div class="modal-body">
                <!-- Cardholder Name -->
                <div class="mb-3">
                  <label>Cardholder Name</label>
                  <input
                    type="text"
                    id="cardHolder"
                    class="form-control"
                    required
                  />
                </div>
                <!-- Card Number -->
                <div class="mb-3">
                  <label>Card Number</label>
                  <input
                    type="text"
                    id="cardNumber"
                    class="form-control"
                    required
                  />
                </div>
                <!-- Expiry & CVV -->
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label>Expiry Date</label>
                    <input
                      type="text"
                      id="expiryDate"
                      class="form-control"
                      placeholder="MM/YY"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label>CVV</label>
                    <input type="text" id="cvv" class="form-control" required />
                  </div>
                </div>
                <p><strong>Total:</strong> <span id="modalTotal"></span></p>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary w-100">
                  Pay Now
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const cartBody = document.getElementById("cartBody");
      const cartTotal = document.getElementById("cartTotal");
      let total = 0;
      let html = "";

      cart.forEach((item, index) => {
        const itemTotal = item.price * item.qty;
        total += itemTotal;
        html += `<tr>
        <td><img src="images/${item.image}" width="80" height="80"/></td>
        <td>${item.name}</td>
        <td>$${item.price.toFixed(2)}</td>
        <td>${item.qty}</td>
        <td>$${itemTotal.toFixed(2)}</td>
        <td><button class="btn btn-danger btn-sm" onclick="removeItem(${index})">X</button></td>
      </tr>`;
      });
      cartBody.innerHTML = html;
      cartTotal.innerText = `Total: $${total.toFixed(2)}`;

      function removeItem(index) {
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        location.reload();
      }

      function updateCartCount() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let count = cart.reduce((sum, item) => sum + item.qty, 0);
        document.getElementById("cart-count").innerText = count;
      }

      document.addEventListener("DOMContentLoaded", updateCartCount);
    </script>
    <script>
      function openPayment() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        let total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
        document.getElementById("modalTotal").innerText = `$${total.toFixed(
          2
        )}`;

        const paymentModal = new bootstrap.Modal(
          document.getElementById("paymentModal")
        );
        paymentModal.show();
      }

      function processPayment(event) {
        event.preventDefault();
        alert("Payment Successful!");

        // Clear Cart
        localStorage.removeItem("cart");
        window.location.href = "index.html"; // ·û¨ Thank you page
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
